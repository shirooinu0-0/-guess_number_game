import random

def guess_number_game():
    print("--- æ­¡è¿ä¾†åˆ°ã€çµ‚æ¥µå¯†ç¢¼ï¼šç”Ÿå­˜æˆ°ã€ ---")

    # è¨­å®šéŠæˆ²é›£åº¦èˆ‡åƒæ•¸
    target = random.randint(1, 100)
    stamina = 7  # ç‰¹è‰²ç©æ³• 1ï¼šé«”åŠ›é™åˆ¶
    hints_available = 2  # ç‰¹è‰²ç©æ³• 2ï¼šæœ‰é™çš„æç¤ºé“å…·
    low, high = 1, 100

    print(f"æ•¸å­—ç¯„åœåœ¨ {low} åˆ° {high} ä¹‹é–“ã€‚")
    print(f"ä½ æœ‰ {stamina} é»é«”åŠ›ï¼Œæ¯çŒœéŒ¯ä¸€æ¬¡æ‰£ 1 é»ã€‚")
    print(f"è¼¸å…¥ 'h' å¯ä»¥ä½¿ç”¨æç¤ºï¼ˆæ¶ˆè€— 2 é»é«”åŠ›ï¼Œå‰©é¤˜ {hints_available} æ¬¡ï¼‰ã€‚")

    while stamina > 0:
        print(f"\nç›®å‰ç¯„åœï¼š{low} ~ {high} | å‰©é¤˜é«”åŠ›ï¼š{'â¤ï¸' * stamina}")
        user_input = input("è«‹è¼¸å…¥æ•¸å­—æˆ–æŒ‡ä»¤: ").lower()

        # ç‰¹è‰²åŠŸèƒ½ï¼šæç¤ºç³»çµ±
        if user_input == 'h':
            if hints_available > 0 and stamina > 2:
                hints_available -= 1
                stamina -= 2
                # æä¾›ä¸€å€‹æ›´å°çš„ç¯„åœæç¤º
                new_gap = (high - low) // 4
                hint_low = max(low, target - random.randint(0, new_gap))
                hint_high = min(high, target + random.randint(0, new_gap))
                print(f"ã€é“å…·ï¼šåµæŸ¥é›·é”ã€‘æç¤ºï¼šæ•¸å­—å¤§æ©Ÿç‡åœ¨ {hint_low} åˆ° {hint_high} ä¹‹é–“ï¼")
                continue
            else:
                print("é«”åŠ›ä¸è¶³ä»¥æ”¯ä»˜æç¤ºæˆ–é“å…·å·²ç”¨å®Œï¼")
                continue

        # æª¢æŸ¥è¼¸å…¥æ˜¯å¦ç‚ºæ•¸å­—
        try:
            guess = int(user_input)
        except ValueError:
            print("ç„¡æ•ˆè¼¸å…¥ï¼Œè«‹è¼¸å…¥æ•¸å­—æˆ– 'h'ã€‚")
            continue

        # åˆ¤æ–·å‹è² 
        if guess == target:
            print(f"ğŸ‰ æ­å–œï¼ä½ æˆåŠŸæ‰¾åˆ°äº†æ•¸å­— {target}ï¼")
            break
        elif guess < target:
            low = max(low, guess + 1)
            print("å¤ªå°äº†ï¼")
        else:
            high = min(high, guess - 1)
            print("å¤ªå¤§äº†ï¼")

        stamina -= 1

    if stamina <= 0:
        print(f"\nğŸ’€ é«”åŠ›è€—ç›¡ï¼ä½ å¤±æ•—äº†ã€‚ç­”æ¡ˆæ˜¯ {target}ã€‚")

if __name__ == "__main__":
    guess_number_game()
